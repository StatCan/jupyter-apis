<lib-form-section title="Custom Notebook" i18n-title>
  <div class="column">
    <mat-form-field
      class="wide"
      appearance="outline"
      *ngIf="parentForm?.value.serverType === 'jupyter'"
      data-cy-form-input="serverImage"
    >
      <!-- If readonly, then make it an input element instead of select -->
      <mat-label i18n>Image</mat-label>
      <mat-select
        placeholder="OCI Image"
        i18n-placeholder
        [formControl]="parentForm.get('image')"
      >
        <mat-option *ngFor="let img of images" [value]="img" [matTooltip]="img">
          {{ imageDisplayName(img) }}
        </mat-option>
      </mat-select>
      <mat-error i18n>Please provide an Image to use</mat-error>
    </mat-form-field>

    <mat-form-field
      class="wide"
      appearance="outline"
      *ngIf="parentForm?.value.serverType === 'group-three'"
      data-cy-form-input="serverImage"
    >
      <!-- If readonly, then make it an input element instead of select -->
      <mat-label i18n>Image</mat-label>
      <mat-select
        placeholder="OCI Image"
        [formControl]="parentForm.get('imageGroupThree')"
        i18n-placeholder
      >
        <mat-option
          *ngFor="let img of imagesGroupThree.options"
          [value]="img"
          [matTooltip]="img"
        >
          {{ imageDisplayName(img) }}
        </mat-option>
      </mat-select>
      <mat-error i18n>Please provide an Image to use</mat-error>
    </mat-form-field>

    <div class="checkbox-grid">
      <mat-checkbox
        *ngIf="allowCustomImage"
        [formControl]="parentForm.get('customImageCheck')"
        (change)="onSelect($event)"
        i18n
        data-cy-form-input="customImageCheck"
        color="primary"
      >
        Custom Image
      </mat-checkbox>

      <span>
        <mat-checkbox
          *ngIf="allowCustomImage"
          [formControl]="parentForm.get('betaImageCheck')"
          (change)="onSelectBeta($event)"
          i18n
          data-cy-form-input="betaImageCheck"
          color="primary"
        >
          Beta Image
        </mat-checkbox>
        <mat-icon
          class="icon checkbox-icon"
          matTooltip="A beta notebook server contains upcoming changes to our notebook server images"
          i18n-matTooltip
          matTooltipPosition="above"
        >
          help
        </mat-icon>
        <div class="beta-notes" i18n>
          Click
          <a
            href="https://github.com/StatCan/zone-kubeflow-containers/compare/master...beta"
            target="_blank"
            >here</a
          >
          to see the changes in beta
        </div>
      </span>
    </div>

    <mat-form-field
      class="wide"
      appearance="outline"
      *ngIf="parentForm?.value.customImageCheck"
      data-cy-form-input="customImage"
    >
      <mat-label i18n>Custom Image</mat-label>
      <mat-hint i18n>
        The selected image will be evaluated against our allow-list. For more
        details on using your own custom images, follow the documentation at
        https://github.com/StatCan/aaw-contrib-containers.
      </mat-hint>
      <input
        matInput
        placeholder="Provide a custom Image"
        i18n-placeholder
        [formControl]="parentForm.get('customImage')"
      />
      <mat-error>{{ urlValidation() }}</mat-error>
    </mat-form-field>
  </div>
</lib-form-section>
